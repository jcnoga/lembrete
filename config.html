const firebaseConfig = {
  apiKey: "AIzaSyBhtwWew_DQNX2TZROUShZz4mjK57pRgQk",
  authDomain: "lembrete-d6c15.firebaseapp.com",
  projectId: "lembrete-d6c15",
  storageBucket: "lembrete-d6c15.firebasestorage.app",
  messagingSenderId: "368296869868",
  appId: "1:368296869868:web:7a2c0a91f57de5d3a90ac9",
  measurementId: "G-JE0QH81JG6"
};

apikey: AIzaSyBhtwWew_DQNX2TZROUShZz4mjK57pRgQk





===============================================================================

O motivo pelo qual o e-mail nÃ£o estÃ¡ chegando Ã© que o arquivo index.html que
 vocÃª copiou Ã© apenas o Front-end (a "cara" do aplicativo). Ele salva a tarefa
 no banco de dados e marca que vocÃª quer receber um e-mail.
Para que o e-mail saia de fato, vocÃª precisa configurar o "RobÃ´" (Back-end) 
no Google Cloud, pois navegadores bloqueiam o envio direto de e-mails 
automÃ¡ticos por seguranÃ§a.
Aqui estÃ¡ o Checklist de CorreÃ§Ã£o para fazer o envio funcionar:
1. VocÃª criou a "Cloud Function" no Google Cloud?
O HTML sozinho nÃ£o envia o e-mail. VocÃª precisa colar o cÃ³digo do robÃ´ no painel do Google.
Acesse console.cloud.google.com.
VÃ¡ em Cloud Functions > Criar FunÃ§Ã£o.
Nome: enviarEmailsDiarios.
Gatilho: HTTPS (Marque "Permitir nÃ£o autenticado" para testar fÃ¡cil).
Clique em PrÃ³ximo.
No editor de cÃ³digo, vocÃª precisa colar estes dois arquivos:
Arquivo package.json:
(Define as ferramentas que o robÃ´ vai usar)
code
JSON
{
  "name": "sample-http",
  "version": "0.0.1",
  "dependencies": {
    "@google-cloud/functions-framework": "^3.0.0",
    "firebase-admin": "^11.0.0",
    "nodemailer": "^6.9.0"
  }
}
Arquivo index.js:
(A lÃ³gica que lÃª o banco e envia o e-mail)
AtenÃ§Ã£o: VocÃª precisa gerar uma Senha de App no seu Gmail. NÃ£o use sua senha normal. 
(VÃ¡ em Conta Google > SeguranÃ§a > VerificaÃ§Ã£o em 2 etapas > Senhas de App).
code
JavaScript
const functions = require('@google-cloud/functions-framework');
const admin = require('firebase-admin');
const nodemailer = require('nodemailer');

admin.initializeApp();
const db = admin.firestore();

// --- CONFIGURAÃ‡ÃƒO DO GMAIL ---
const transporter = nodemailer.createTransport({
  service: 'gmail',
  auth: {
    user: 'SEU_EMAIL@gmail.com', // <--- COLOQUE SEU EMAIL AQUI
    pass: 'SUA_SENHA_DE_APP'     // <--- COLOQUE A SENHA DE APP AQUI (16 letras)
  }
});

functions.http('enviarEmailsDiarios', async (req, res) => {
  try {
    // Calcula a data de AMANHÃƒ (para avisar na vÃ©spera)
    const hoje = new Date();
    const amanha = new Date(hoje);
    amanha.setDate(amanha.getDate() + 1);
    const dataAlvo = amanha.toISOString().split('T')[0]; 

    console.log(`Verificando tarefas para: ${dataAlvo}`);

    // Busca tarefas no banco
    // IMPORTANTE: Isso exige um Ã­ndice no Firestore (veja o erro nos logs se falhar)
    const snapshot = await db.collectionGroup('tasks')
      .where('date', '==', dataAlvo)
      .where('sendEmail', '==', true)
      .where('completed', '==', false)
      .get();

    if (snapshot.empty) {
      return res.send('Nenhuma tarefa para enviar e-mail amanhÃ£.');
    }

    const envios = [];

    snapshot.forEach(doc => {
      const task = doc.data();
      if (task.emailAddr) {
        const mailOptions = {
          from: 'Lembrete FÃ¡cil <seu_email@gmail.com>',
          to: task.emailAddr,
          subject: `ğŸ”” Lembrete: ${task.title}`,
          html: `
            <h3>OlÃ¡! VocÃª tem um compromisso amanhÃ£.</h3>
            <p><strong>O quÃª:</strong> ${task.title}</p>
            <p><strong>Quando:</strong> ${task.time || 'Dia todo'}</p>
            <p><strong>Valor:</strong> R$ ${task.value || '0,00'}</p>
            <hr>
            <p><i>Enviado automaticamente pelo Compromisso FÃ¡cil Cloud.</i></p>
          `
        };
        envios.push(transporter.sendMail(mailOptions));
      }
    });

    await Promise.all(envios);
    res.send(`Sucesso! ${envios.length} e-mails enviados.`);

  } catch (error) {
    console.error(error);
    res.status(500).send("Erro: " + error.message);
  }
});
2. Erro de Ãndice (Muito Comum)
Depois de criar a funÃ§Ã£o, se vocÃª tentar rodar e der erro, vÃ¡ na aba LOGS da Cloud Function.
Provavelmente haverÃ¡ um erro vermelho dizendo: "The query requires an index".
HaverÃ¡ um link azul ao lado desse erro nos logs.
Clique nesse link. Ele vai abrir o Firestore e criar o Ã­ndice necessÃ¡rio
 automaticamente. Sem isso, o Google bloqueia a busca por seguranÃ§a.
3. Agendador (Cloud Scheduler)
O cÃ³digo acima sÃ³ roda quando alguÃ©m "chama" ele. Para ser automÃ¡tico:
VÃ¡ em Cloud Scheduler no Google Cloud.
Crie um Job.
FrequÃªncia: 0 8 * * * (Todo dia Ã s 8h).
Destino: HTTP.
URL: Cole a URL da sua Cloud Function (vocÃª pega ela na aba "Gatilho" ou "Trigger" da funÃ§Ã£o).
Resumo
Se vocÃª sÃ³ usar o arquivo index.html, o checkbox "Enviar e-mail automÃ¡tico" apenas 
salva essa preferÃªncia no banco de dados. O envio real depende desse cÃ³digo Back-end
 rodando no servidor do Google.
Se vocÃª achou isso muito complicado e prefere uma soluÃ§Ã£o mais simples (mas que 
exige o navegador aberto), me avise que eu altero o cÃ³digo para usar o EmailJS (Front-end) novamente.

https://console.cloud.google.com/projectselector2/run?supportedpurview=project&authuser=0

lembrete-d6c15

lembrete91@gmail.com,   Senha de app: LembreteApp=   avba hgmo gvxo axvf
---------------------------------------------------------------------------------





passo a passo:

Perfeito. O lugar correto para colocar essas informaÃ§Ãµes Ã© exclusivamente no 
"CÃ©rebro" (o RobÃ´) que fica dentro do Google Cloud, e nÃ£o no arquivo HTML do site.
Aqui estÃ¡ o passo a passo exato de onde colar isso:

Passo 1:
 Acesse o Painel do Google Cloud
Entre no site: console.cloud.google.com
Na barra azul do topo, certifique-se de que o projeto selecionado Ã© o lembrete-d6c15.

Passo 2:
VÃ¡ para as "Cloud Functions"
Na barra de busca (topo da pÃ¡gina), digite: Cloud Functions.
Clique na opÃ§Ã£o Cloud Functions.
Se vocÃª jÃ¡ criou a funÃ§Ã£o enviarEmailsDiarios, clique no nome dela.
Se nÃ£o criou, clique em "Criar FunÃ§Ã£o", dÃª o nome enviarEmailsDiarios, 
escolha Gatilho HTTPS e clique em PrÃ³ximo.
Se jÃ¡ existia, clique no botÃ£o EDITAR (no topo).
Clique em PRÃ“XIMO para chegar na tela do cÃ³digo.

Passo 3:
 Coloque o E-mail e a Senha
Agora vocÃª verÃ¡ um editor de texto com dois arquivos: package.json e index.js.

1. No arquivo package.json:
Certifique-se de que estÃ¡ escrito exatamente assim (copie e cole se precisar):
code
JSON
{
  "name": "sample-http",
  "version": "0.0.1",
  "dependencies": {
    "@google-cloud/functions-framework": "^3.0.0",
    "firebase-admin": "^11.0.0",
    "nodemailer": "^6.9.0"
  }
}
2. No arquivo index.js (AQUI Ã‰ O LUGAR DO E-MAIL):
Apague tudo o que estiver lÃ¡ e cole este cÃ³digo exato abaixo. Eu jÃ¡ coloquei o seu e-mail e a sua senha nele:
code
JavaScript
const functions = require('@google-cloud/functions-framework');
const admin = require('firebase-admin');
const nodemailer = require('nodemailer');

admin.initializeApp();
const db = admin.firestore();

// --- AQUI ESTÃ A CONFIGURAÃ‡ÃƒO DO SEU E-MAIL ---
const transporter = nodemailer.createTransport({
  service: 'gmail',
  auth: {
    user: 'lembrete91@gmail.com',  // Seu e-mail
    pass: 'pyfz mxbq pqrq btgb'    // Sua senha de app
  }
});

functions.http('enviarEmailsDiarios', async (req, res) => {
  try {
    // Define a data de AMANHÃƒ
    const hoje = new Date();
    const amanha = new Date(hoje);
    amanha.setDate(amanha.getDate() + 1);
    // Ajuste para o fuso horÃ¡rio do Brasil (Garante que a data esteja certa)
    const dataAlvo = amanha.toLocaleDateString('pt-BR').split('/').reverse().join('-'); // YYYY-MM-DD

    console.log(`Verificando tarefas para a data: ${dataAlvo}`);

    // Busca tarefas no banco de dados
    const snapshot = await db.collectionGroup('tasks')
      .where('date', '==', dataAlvo)
      .where('sendEmail', '==', true)
      .where('completed', '==', false)
      .get();

    if (snapshot.empty) {
      return res.send('Nenhuma tarefa encontrada para amanhÃ£.');
    }

    const envios = [];

    snapshot.forEach(doc => {
      const task = doc.data();
      // SÃ³ envia se tiver e-mail de destino cadastrado na tarefa
      if (task.emailAddr) {
        const mailOptions = {
          from: 'Compromisso FÃ¡cil <lembrete91@gmail.com>',
          to: task.emailAddr,
          subject: `ğŸ”” Lembrete: ${task.title}`,
          html: `
            <div style="font-family: Arial, sans-serif; padding: 20px; border: 1px solid #eee; border-radius: 10px;">
              <h2 style="color: #0066cc;">OlÃ¡! Lembrete de Compromisso</h2>
              <p>VocÃª tem uma tarefa agendada para <strong>amanhÃ£</strong>.</p>
              <hr>
              <p><strong>ğŸ“Œ Tarefa:</strong> ${task.title}</p>
              <p><strong>â° HorÃ¡rio:</strong> ${task.time || 'Dia todo'}</p>
              <p><strong>ğŸ’° Valor:</strong> R$ ${task.value || '0,00'}</p>
              <p><strong>ğŸ“ Notas:</strong> ${task.notes || 'Sem detalhes'}</p>
              <hr>
              <small style="color: #777;">Enviado automaticamente pelo seu App.</small>
            </div>
          `
        };
        envios.push(transporter.sendMail(mailOptions));
      }
    });

    await Promise.all(envios);
    res.send(`Sucesso! ${envios.length} e-mails enviados.`);

  } catch (error) {
    console.error('Erro:', error);
    res.status(500).send('Erro no envio: ' + error.message);
  }
});
Passo 4: Finalizar
Clique no botÃ£o azul IMPLANTAR (ou Deploy) no final da pÃ¡gina.
Aguarde uns 2 minutos atÃ© aparecer um "check" verde âœ… ao lado da funÃ§Ã£o.
Pronto! Agora o robÃ´ tem suas credenciais corretas e seguras.
Se vocÃª configurou o Cloud Scheduler (o despertador) para tocar todo dia Ã s 08:00
 (como falamos antes), ele vai usar esse cÃ³digo aÃ­ em cima para disparar os e-mails.